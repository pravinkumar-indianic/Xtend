<div class="ui segment">
    <p>
        <a href="/user-management/catalog">Back to User Catalog</a>
    </p>
    <div id="user-detail">
        {% if user %}

        <h1>{{ user.full_name }}</h1>
        <p>
            {% if user.last_login %}
            <small>Last seen: {{ user.last_login|date('d/m/y h:i a') }}</small>
            {% else %}
            <small>This user hasn't signed in yet. (No activity detected)</small>
            {% endif %}
        </p>


        <strong>CRM</strong>
        <p>{{ user.crm}}</p>

        <strong>Full Name</strong>
        <p>{{ user.full_name}}</p>

        <strong>Email</strong>
        <p>{{ user.email}}</p>

        <strong>Business (Store) Name</strong>
        <p>{{ user.business_name}}</p>

        <strong>Membership Level</strong>
        <p>{{ user.membership_level }}</p>

        <strong>Retail Program</strong>
        <p>{{ user.retail_program }}</p>

        <strong>Ranking 2021</strong>
        <p>{{ user.ranking_2021 }}</p>

        <strong>Address 1</strong>
        <p>{{ user.address_1 }}</p>

        <strong>Address 2</strong>
        <p>{{ user.address_2 }}</p>

        <strong>Suburb</strong>
        <p>{{ user.suburb }}</p>

        <strong>Postcode</strong>
        <p>{{ user.postcode }}</p>

        <strong>KAM</strong>
        <p>{{ user.kam }}</p>

        <strong>User Type</strong>
        <p>{{ user.roll }}</p>

        {% else %}
        <p>User not found</p>
        {% endif %}
    </div>
</div>

{% put scripts %}
<script>
  $('body').on('click', '.activate', function (e) {
    let id = $(this).attr('data-id');
    if (id) {
      var data = {
        'id': id,
      };
      requestFactory('UserManagement::onUserActivate', data, ['#user-controls-' + id]);
    }
  });

  $('body').on('click', '.deactivate', function (e) {
    let id = $(this).attr('data-id');
    if (id) {
      var data = {
        'id': id
      };
      requestFactory('UserManagement::onUserDeactivate', data, ['#user-detail']);
    }
  });
</script>
{% endput %}
